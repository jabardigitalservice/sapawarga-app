kind: ConfigMap
apiVersion: v1
metadata:
  name: sapawarga-backend-config-env
  namespace: sapawarga
data:
  PHP_ENABLE_XDEBUG: "0"
  YII_ENV_DEV: "0"
  APP_STORAGE_LOCAL_URL: %APP_STORAGE_LOCAL_URL%
  APP_VERSION: %APP_VERSION%
  # mysql
  MYSQL_HOST: %MYSQL_HOST%
  MYSQL_PORT: "3306"
  MYSQL_DATABASE: %MYSQL_DATABASE%
  MYSQL_HOST_SLAVE_1: %MYSQL_HOST_SLAVE_1%
  MYSQL_HOST_SLAVE_2: %MYSQL_HOST_SLAVE_2%
  MYSQL_HOST_SLAVE_3: %MYSQL_HOST_SLAVE_3%

  REDIS_HOST: %REDIS_HOST%
  REDIS_PORT: %REDIS_PORT%
  REDIS_DB: "0"

  # mysql dtks
  MYSQL_HOST_DTKS: %MYSQL_HOST_DTKS%
  MYSQL_PORT_DTKS: "3306"
  MYSQL_DATABASE_DTKS: %MYSQL_DATABASE_DTKS%
  # cache
  CACHE_USE_MEMCACHED: "true"
  CACHE_SERVERS: memcached
  CACHE_PORT: "11211"
  CACHE_WEIGHT: "60"
  #mailer
  MAILER_TRANSPORT_FILE: "false"
  MAILER_HOST: %MAILER_HOST%
  MAILER_PORT: "%MAILER_PORT%"
  MAILER_FROM_EMAIL: %MAILER_FROM_EMAIL%
  MAILER_FROM_NAME: %MAILER_FROM_NAME%
  # others
  SENTRY_DSN: %SENTRY_DSN%
  FRONTEND_URL: %FRONTEND_URL%
  KEPENDUDUKAN_API_BASE_URL: %KEPENDUDUKAN_API_BASE_URL%
  KEPENDUDUKAN_API_KEY: %KEPENDUDUKAN_API_KEY%
  ERROR_ENVIRONMENT: %ERROR_ENVIRONMENT_DSN_PRODUCTION%
  ERROR_REPORT: "true"
  BANSOS_PROCESS_EXCEL_URL: %BANSOS_PROCESS_EXCEL_URL%
  # storage
  APP_STORAGE_FS: %APP_STORAGE_FS%
  APP_STORAGE_PUBLIC_URL: %APP_STORAGE_PUBLIC_URL%
  APP_STORAGE_S3_BUCKET: %APP_STORAGE_S3_BUCKET%
  APP_STORAGE_S3_BUCKET_REGION: %APP_STORAGE_S3_BUCKET_REGION%
  # storage dtks
  S3_FOLDER_INVALID: %S3_FOLDER_INVALID%
  S3_FOLDER_INVALID_VERVAL: %S3_FOLDER_INVALID_VERVAL%
---
apiVersion: v1
kind: Secret
metadata:
  name: sapawarga-backend-secret
  namespace: sapawarga
data:
  COOKIE_VALIDATION_KEY: %COOKIE_VALIDATION_KEY% # K0I9yOJPLBqbaam4IWrqtelfxp1m1zEXB04f5H6D
  # mysql credentials
  MYSQL_USER: %MYSQL_USER% # Base64 decoded=mysqluser
  MYSQL_PASSWORD: %MYSQL_PASSWORD% # Base64 decoded=asdf1234
  MYSQL_ROOT_PASSWORD: %MYSQL_ROOT_PASSWORD% # Base64 decoded=asdf1234
  MYSQL_USER_SLAVE: %MYSQL_USER_SLAVE%
  MYSQL_PASSWORD_SLAVE: %MYSQL_PASSWORD_SLAVE%
  # mysql dtks credentials
  MYSQL_USER_DTKS: %MYSQL_USER_DTKS% # Base64
  MYSQL_PASSWORD_DTKS: %MYSQL_PASSWORD_DTKS% # Base64
  FCM_KEY: %FCM_KEY%
  # CACHE_USERNAME: #
  # CACHE_PASSWORD: #
  MAILER_USER: %MAILER_USER%
  MAILER_PASSWORD: %MAILER_PASSWORD%
  MAILER_ENCRYPTION: %MAILER_ENCRYPTION%
  APP_STORAGE_S3_KEY: %APP_STORAGE_S3_KEY% # Base64
  APP_STORAGE_S3_SECRET: %APP_STORAGE_S3_SECRET% # Base64
---
apiVersion: v1
kind: Secret
metadata:
  name: regcred
  namespace: sapawarga
data:
  .dockerconfigjson: %dockerconfigjson% # Base64 decoded={"auths": {"your.registry.host": {"auth": "username:password"}}}
type: kubernetes.io/dockerconfigjson
